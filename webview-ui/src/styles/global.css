@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================================
   NEBULA DESIGN SYSTEM — World-Class API Tester UI
   Inspired by Linear, Raycast, Vercel, and Insomnia
   ============================================================ */

:root {
  font-family: var(--vscode-font-family, -apple-system, BlinkMacSystemFont, 'Inter', 'Segoe UI', Roboto, sans-serif);
  font-size: var(--vscode-font-size, 13px);
  color: var(--vscode-foreground);
  background-color: var(--vscode-editor-background);

  /* ——— Brand Colors ——— */
  --api-primary:       #4f86f7;   /* Electric Blue     */
  --api-primary-hover: #3b73e8;
  --api-primary-dim:   #3b73e820;
  --api-primary-rgb:   79, 134, 247;

  --api-purple:        #8b5cf6;   /* Nebula Purple      */
  --api-purple-hover:  #7c3aed;
  --api-purple-rgb:    139, 92, 246;

  --api-success:       #10b981;   /* Emerald            */
  --api-success-hover: #059669;
  --api-success-rgb:   16, 185, 129;

  --api-warning:       #f59e0b;   /* Amber              */
  --api-warning-hover: #d97706;
  --api-warning-rgb:   245, 158, 11;

  --api-error:         #f43f5e;   /* Rose               */
  --api-error-hover:   #e11d48;
  --api-error-rgb:     244, 63, 94;

  --api-info:          #0ea5e9;   /* Sky                */
  --api-info-rgb:      14, 165, 233;

  --api-cyan:          #06b6d4;
  --api-cyan-rgb:      6, 182, 212;

  --api-pink:          #ec4899;
  --api-pink-rgb:      236, 72, 153;

  /* ——— Semantic Text ——— */
  --text-primary:    var(--vscode-foreground);
  --text-secondary:  color-mix(in srgb, var(--vscode-foreground) 72%, transparent);
  --text-tertiary:   color-mix(in srgb, var(--vscode-foreground) 50%, transparent);
  --text-muted:      color-mix(in srgb, var(--vscode-foreground) 35%, transparent);
  --text-placeholder:color-mix(in srgb, var(--vscode-foreground) 30%, transparent);

  /* ——— Surface / Background ——— */
  --bg-canvas:    var(--vscode-editor-background);
  --bg-elevated:  color-mix(in srgb, var(--vscode-editor-background) 88%, white 12%);
  --bg-raised:    color-mix(in srgb, var(--vscode-editor-background) 93%, white 7%);
  --bg-subtle:    color-mix(in srgb, var(--vscode-editor-background) 96%, white 4%);
  --bg-hover:     rgba(255, 255, 255, 0.055);
  --bg-active:    rgba(255, 255, 255, 0.09);
  --bg-glass:     rgba(255, 255, 255, 0.025);
  --bg-glass-md:  rgba(255, 255, 255, 0.05);
  --bg-glass-lg:  rgba(255, 255, 255, 0.08);

  /* ——— Borders ——— */
  --border-hairline: rgba(255, 255, 255, 0.03);
  --border-subtle:   rgba(255, 255, 255, 0.05);
  --border-default:  rgba(255, 255, 255, 0.09);
  --border-strong:   rgba(255, 255, 255, 0.16);
  --border-focus:    rgba(var(--api-primary-rgb), 0.6);
  --border-glow:     rgba(var(--api-primary-rgb), 0.35);

  /* ——— Shadows ——— */
  --shadow-xs:     0 1px 2px rgba(0,0,0,0.12);
  --shadow-sm:     0 2px 6px rgba(0,0,0,0.16);
  --shadow-md:     0 4px 12px rgba(0,0,0,0.2);
  --shadow-lg:     0 8px 24px rgba(0,0,0,0.24);
  --shadow-xl:     0 16px 40px rgba(0,0,0,0.3);
  --shadow-glow:   0 0 16px -4px rgba(var(--api-primary-rgb), 0.28);
  --shadow-glow-sm:0 0 10px -3px rgba(var(--api-primary-rgb), 0.2);

  /* ——— Gradients (reusable) ——— */
  --grad-primary:    linear-gradient(135deg, var(--api-primary), var(--api-purple));
  --grad-success:    linear-gradient(135deg, var(--api-success), var(--api-cyan));
  --grad-danger:     linear-gradient(135deg, var(--api-error), var(--api-pink));
  --grad-warm:       linear-gradient(135deg, var(--api-warning), var(--api-pink));
  --grad-surface:    linear-gradient(135deg, var(--bg-glass), var(--bg-glass-md));
  --grad-noise:      url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.75' numOctaves='4' stitchTiles='stitch'/%3E%3CfeColorMatrix type='saturate' values='0'/%3E%3C/filter%3E%3Crect width='200' height='200' filter='url(%23n)' opacity='0.025'/%3E%3C/svg%3E");

  /* ——— Border Radius ——— */
  --radius-xs:  4px;
  --radius-sm:  6px;
  --radius-md:  8px;
  --radius-lg:  12px;
  --radius-xl:  16px;
  --radius-2xl: 20px;
  --radius-full: 9999px;

  /* ——— Motion ——— */
  --ease-spring:  cubic-bezier(0.34, 1.56, 0.64, 1);
  --ease-smooth:  cubic-bezier(0.4, 0, 0.2, 1);
  --ease-out:     cubic-bezier(0, 0, 0.2, 1);
  --ease-in:      cubic-bezier(0.4, 0, 1, 1);
  --duration-fast:   120ms;
  --duration-base:   200ms;
  --duration-slow:   350ms;
  --duration-slower: 500ms;
}

body {
  margin: 0;
  padding: 0;
  overflow-x: hidden;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background-color: var(--vscode-editor-background);
}

/* ——— Scrollbars ——— */
::-webkit-scrollbar { width: 7px; height: 7px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb {
  background: var(--border-default);
  border-radius: var(--radius-full);
  border: 2px solid transparent;
  background-clip: content-box;
}
::-webkit-scrollbar-thumb:hover {
  background: var(--border-strong);
  background-clip: content-box;
}
::-webkit-scrollbar-corner { background: transparent; }

/* ——— Focus ——— */
*:focus { outline: 2px solid rgba(var(--api-primary-rgb), 0.6); outline-offset: -2px; }
*:focus:not(:focus-visible) { outline: none; }
*:focus-visible { outline: 2px solid rgba(var(--api-primary-rgb), 0.7); outline-offset: 2px; border-radius: var(--radius-sm); }

/* ——— Selection ——— */
::selection {
  background: rgba(var(--api-primary-rgb), 0.25);
  color: var(--text-primary);
}

/* ============================================================
   COMPONENT LIBRARY
   ============================================================ */
@layer components {

  /* ——— Buttons ——— */
  .btn {
    @apply inline-flex items-center justify-center gap-1.5 px-4 py-2 rounded-lg text-sm font-medium select-none;
    transition: all var(--duration-base) var(--ease-smooth);
    position: relative;
    overflow: hidden;
  }

  .btn:disabled {
    opacity: 0.4;
    cursor: not-allowed;
    transform: none !important;
  }

  .btn-primary {
    background: var(--grad-primary);
    color: #fff;
    border: 1px solid rgba(255,255,255,0.1);
    font-weight: 600;
    letter-spacing: 0.01em;
  }

  .btn-primary:hover:not(:disabled) {
    background: linear-gradient(135deg, var(--api-primary-hover), var(--api-purple-hover));
    box-shadow: var(--shadow-sm), 0 0 10px -3px rgba(var(--api-primary-rgb), 0.3);
  }

  .btn-primary:active:not(:disabled) {
    box-shadow: none;
  }

  .btn-secondary {
    background: var(--bg-glass-md);
    color: var(--text-secondary);
    border: 1px solid var(--border-default);
  }

  .btn-secondary:hover:not(:disabled) {
    background: var(--bg-hover);
    border-color: var(--border-strong);
    color: var(--text-primary);
  }

  .btn-ghost {
    background: transparent;
    color: var(--text-tertiary);
    border: 1px solid transparent;
  }

  .btn-ghost:hover:not(:disabled) {
    background: var(--bg-hover);
    border-color: var(--border-subtle);
    color: var(--text-primary);
  }

  .btn-danger {
    background: linear-gradient(135deg, rgba(var(--api-error-rgb), 0.15), rgba(var(--api-pink-rgb), 0.1));
    color: var(--api-error);
    border: 1px solid rgba(var(--api-error-rgb), 0.25);
  }

  .btn-danger:hover:not(:disabled) {
    background: linear-gradient(135deg, rgba(var(--api-error-rgb), 0.22), rgba(var(--api-pink-rgb), 0.12));
    border-color: rgba(var(--api-error-rgb), 0.35);
  }

  .btn-icon {
    @apply p-2 rounded-lg;
    background: transparent;
    color: var(--text-tertiary);
    border: 1px solid transparent;
    transition: all var(--duration-fast) var(--ease-smooth);
  }

  .btn-icon:hover {
    background: var(--bg-hover);
    color: var(--text-primary);
    border-color: var(--border-subtle);
  }

  .btn-icon:active {
    opacity: 0.7;
  }

  /* ——— Inputs ——— */
  .input {
    @apply w-full px-3 py-2 rounded-lg text-sm;
    background: var(--bg-glass-md);
    color: var(--text-primary);
    border: 1px solid var(--border-default);
    transition: border-color var(--duration-base) var(--ease-smooth), box-shadow var(--duration-base) var(--ease-smooth);
    caret-color: var(--api-primary);
  }

  .input::placeholder { color: var(--text-placeholder); }

  .input:hover:not(:focus) {
    border-color: var(--border-strong);
  }

  .input:focus {
    outline: none;
    border-color: rgba(var(--api-primary-rgb), 0.55);
    box-shadow: 0 0 0 3px rgba(var(--api-primary-rgb), 0.1);
  }

  .select {
    @apply px-3 py-2 rounded-lg text-sm cursor-pointer;
    background: var(--bg-glass-md);
    color: var(--text-primary);
    border: 1px solid var(--border-default);
    transition: border-color var(--duration-base) var(--ease-smooth);
  }

  .select:hover { border-color: var(--border-strong); }

  .select:focus {
    outline: none;
    border-color: rgba(var(--api-primary-rgb), 0.55);
    box-shadow: 0 0 0 3px rgba(var(--api-primary-rgb), 0.1);
  }

  /* ——— Panels / Cards ——— */
  .panel {
    background: var(--bg-subtle);
    border: 1px solid var(--border-subtle);
    border-radius: var(--radius-xl);
  }

  .card {
    background: var(--bg-elevated);
    border: 1px solid var(--border-default);
    border-radius: var(--radius-xl);
    transition: border-color var(--duration-slow) var(--ease-smooth);
  }

  .card:hover {
    border-color: var(--border-strong);
  }

  /* Surface with inset highlight */
  .surface {
    background: var(--bg-glass);
    border: 1px solid var(--border-subtle);
    border-radius: var(--radius-lg);
    box-shadow: inset 0 1px 0 rgba(255,255,255,0.06), var(--shadow-xs);
  }

  /* ——— Tabs ——— */
  .tab {
    @apply relative px-4 py-2.5 text-sm font-medium cursor-pointer rounded-t-md;
    color: var(--text-tertiary);
    border-bottom: 2px solid transparent;
    transition: color var(--duration-fast) var(--ease-smooth), background var(--duration-fast) var(--ease-smooth);
    white-space: nowrap;
  }

  .tab:hover {
    color: var(--text-primary);
    background: var(--bg-hover);
  }

  .tab-active {
    color: var(--text-primary) !important;
    border-bottom-color: var(--api-primary);
  }

  .tab-active::after {
    content: '';
    position: absolute;
    bottom: -1px;
    left: 8px;
    right: 8px;
    height: 2px;
    background: var(--api-primary);
    border-radius: var(--radius-full);
  }

  /* ——— Badges ——— */
  .badge {
    @apply inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-semibold tracking-wide;
    background: rgba(var(--api-primary-rgb), 0.12);
    color: var(--api-primary);
    border: 1px solid rgba(var(--api-primary-rgb), 0.22);
  }

  .badge-success {
    background: rgba(var(--api-success-rgb), 0.12);
    color: var(--api-success);
    border-color: rgba(var(--api-success-rgb), 0.22);
  }

  .badge-warning {
    background: rgba(var(--api-warning-rgb), 0.12);
    color: var(--api-warning);
    border-color: rgba(var(--api-warning-rgb), 0.22);
  }

  .badge-error {
    background: rgba(var(--api-error-rgb), 0.12);
    color: var(--api-error);
    border-color: rgba(var(--api-error-rgb), 0.22);
  }

  /* ——— HTTP Method Badges ——— */
  .method-badge {
    @apply inline-flex items-center px-2.5 py-1 rounded-md text-xs font-bold uppercase tracking-wider;
    text-shadow: 0 1px 2px rgba(0,0,0,0.25);
    box-shadow: var(--shadow-xs);
  }

  .method-get    { background: linear-gradient(135deg,rgba(97,175,254,.18),rgba(97,175,254,.08));   color:#61affe; border:1px solid rgba(97,175,254,.28); }
  .method-post   { background: linear-gradient(135deg,rgba(73,204,144,.18),rgba(73,204,144,.08));   color:#49cc90; border:1px solid rgba(73,204,144,.28); }
  .method-put    { background: linear-gradient(135deg,rgba(252,161,48,.18),rgba(252,161,48,.08));   color:#fca130; border:1px solid rgba(252,161,48,.28); }
  .method-patch  { background: linear-gradient(135deg,rgba(80,227,194,.18),rgba(80,227,194,.08));   color:#50e3c2; border:1px solid rgba(80,227,194,.28); }
  .method-delete { background: linear-gradient(135deg,rgba(244,63,94,.18),rgba(244,63,94,.08));     color:#f43f5e; border:1px solid rgba(244,63,94,.28); }
  .method-head   { background: linear-gradient(135deg,rgba(144,18,254,.18),rgba(168,85,247,.08));   color:#a855f7; border:1px solid rgba(144,18,254,.28); }
  .method-options{ background: linear-gradient(135deg,rgba(14,165,233,.18),rgba(14,165,233,.08));   color:#38bdf8; border:1px solid rgba(14,165,233,.28); }

  /* ——— Status Code Badges ——— */
  .status-success      { background:linear-gradient(135deg,rgba(16,185,129,.16),rgba(16,185,129,.07));  color:#34d399; border:1px solid rgba(16,185,129,.28); }
  .status-redirect     { background:linear-gradient(135deg,rgba(245,158,11,.16),rgba(245,158,11,.07));  color:#fbbf24; border:1px solid rgba(245,158,11,.28); }
  .status-client-error { background:linear-gradient(135deg,rgba(249,115,22,.16),rgba(249,115,22,.07));  color:#fb923c; border:1px solid rgba(249,115,22,.28); }
  .status-server-error { background:linear-gradient(135deg,rgba(244,63,94,.16),rgba(244,63,94,.07));    color:#f87171; border:1px solid rgba(244,63,94,.28); }

  /* ——— Table ——— */
  .kv-table { @apply w-full border-collapse; }

  .kv-table th {
    @apply text-left text-xs font-semibold px-4 py-2.5;
    color: var(--text-muted);
    border-bottom: 1px solid var(--border-subtle);
    text-transform: uppercase;
    letter-spacing: 0.06em;
  }

  .kv-table td {
    @apply px-4 py-2.5 text-sm;
    border-bottom: 1px solid var(--border-hairline);
    color: var(--text-primary);
    transition: background-color var(--duration-fast) var(--ease-smooth);
  }

  .kv-table tr:last-child td { border-bottom: none; }
  .kv-table tr:hover td { background: var(--bg-hover); }

  /* ——— Divider ——— */
  .divider { border-top: 1px solid var(--border-subtle); }

  /* ——— Text utilities ——— */
  .text-primary   { color: var(--text-primary); }
  .text-secondary { color: var(--text-secondary); }
  .text-tertiary  { color: var(--text-tertiary); }
  .text-muted     { color: var(--text-muted); }

  .text-gradient {
    background: var(--grad-primary);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .text-gradient-warm {
    background: var(--grad-warm);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  /* ——— Glow utilities ——— */
  .glow-primary { box-shadow: var(--shadow-glow); }
  .glow-success { box-shadow: 0 0 20px -4px rgba(var(--api-success-rgb), 0.4); }
  .glow-error   { box-shadow: 0 0 20px -4px rgba(var(--api-error-rgb), 0.4); }

  /* ——— Shimmer loading ——— */
  .shimmer {
    background: linear-gradient(90deg, var(--bg-glass) 25%, var(--bg-glass-md) 50%, var(--bg-glass) 75%);
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
    border-radius: var(--radius-md);
  }

  /* ——— Noise overlay ——— */
  .noise::before {
    content: '';
    position: absolute;
    inset: 0;
    background-image: var(--grad-noise);
    opacity: 0.4;
    pointer-events: none;
    border-radius: inherit;
  }
}

/* ============================================================
   ANIMATIONS
   ============================================================ */
@keyframes shimmer {
  0%   { background-position: -200% 0; }
  100% { background-position:  200% 0; }
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 0 0 rgba(var(--api-primary-rgb), 0.4); }
  50%       { box-shadow: 0 0 0 6px rgba(var(--api-primary-rgb), 0); }
}

@keyframes float {
  0%, 100% { transform: translateY(0); }
  50%       { transform: translateY(-4px); }
}

@keyframes slide-up {
  from { opacity: 0; transform: translateY(8px); }
  to   { opacity: 1; transform: translateY(0); }
}

@keyframes slide-down {
  from { opacity: 0; transform: translateY(-8px); }
  to   { opacity: 1; transform: translateY(0); }
}

@keyframes fade-in {
  from { opacity: 0; }
  to   { opacity: 1; }
}

@keyframes scale-in {
  from { opacity: 0; transform: scale(0.95); }
  to   { opacity: 1; transform: scale(1); }
}

.animate-spin         { animation: spin 1s linear infinite; }
.animate-spin-fast    { animation: spin 0.5s linear infinite; }
.animate-pulse-glow   { animation: pulse-glow 2s ease-in-out infinite; }
.animate-float        { animation: float 3s ease-in-out infinite; }
.animate-slide-up     { animation: slide-up 200ms var(--ease-out) both; }
.animate-slide-down   { animation: slide-down 200ms var(--ease-out) both; }
.animate-fade-in      { animation: fade-in 200ms var(--ease-out) both; }
.animate-scale-in     { animation: scale-in 200ms var(--ease-spring) both; }

/* ============================================================
   CODE EDITOR (CodeMirror)
   ============================================================ */
.cm-editor {
  font-family: var(--vscode-editor-font-family, 'JetBrains Mono', 'Fira Code', 'Cascadia Code', 'Consolas', monospace) !important;
  font-size: var(--vscode-editor-font-size, 13px) !important;
  border-radius: var(--radius-lg);
  overflow: hidden;
  background: transparent !important;
}

.cm-editor.cm-focused { outline: none !important; }

.cm-scroller {
  font-family: inherit !important;
  line-height: 1.6 !important;
}

.cm-gutters {
  background: var(--bg-glass) !important;
  border-right: 1px solid var(--border-subtle) !important;
  color: var(--text-muted) !important;
}

.cm-activeLineGutter,
.cm-activeLine {
  background: var(--bg-hover) !important;
}

.cm-selectionBackground {
  background: rgba(var(--api-primary-rgb), 0.18) !important;
}
